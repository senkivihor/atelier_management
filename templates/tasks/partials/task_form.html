<dialog id="{{ 'create-task-modal' if is_create else 'update-task-modal-'|add:task.pk }}">
    <article>
        <header>
            <a href="#close" aria-label="Close" class="close" data-target="dialog-container"
               hx-get="{% url 'task_list' %}" hx-swap="innerHTML" hx-target="body"></a>
            <h3>{{ 'Create New Task' if is_create else 'Edit Task' }}</h3>
        </header>
        <form method="post"
              {% if is_create %}hx-post="{% url 'task_create' %}"{% else %}hx-post="{% url 'task_update' task.pk %}"{% endif %}
              hx-target="#task-list-table-body"
              hx-swap="outerHTML"
              hx-on--after-request="if (event.detail.xhr.status >= 200 && event.detail.xhr.status < 300) { document.getElementById('{{ 'create-task-modal' if is_create else 'update-task-modal-'|add:task.pk }}').close(); }"
              hx-sync="this:replace">
            {% csrf_token %}
            {% for field in form %}
                <label for="{{ field.id_for_label }}">{{ field.label }}</label>
                {{ field }}
                {% if field.help_text %}
                    <small>{{ field.help_text }}</small>
                {% endif %}
                {% for error in field.errors %}
                    <small style="color: var(--pico-del-color);">{{ error }}</small>
                {% endfor %}
            {% endfor %}
            <small style="color: var(--pico-del-color);">{% for error in form.non_field_errors %}{{ error }}{% endfor %}</small>
            <button type="submit">{{ 'Create Task' if is_create else 'Update Task' }}</button>
        </form>
    </article>
</dialog>